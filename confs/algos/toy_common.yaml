# Ovveride config for quick compile testing

common:
  # If True, PyTorch code will run 6x slower
  detect_anomaly: False
  resume: False

nas:
  search:
    data_parallel: False
    # Ignore checkpoint file if it exists
    resume: False
    search_iters: 1
    pareto:
      max_reductions: 2
      max_cells: 5
      max_nodes: 2
      enabled: False
    seed_train:
      trainer:
        # Number of epochs that model will be trained before search
        epochs: 1
      loader:
        train_batch: 32
        test_batch: 32
        # For toy mode batch size is small, so use higher val_ratio;
        # otherwise batch size will be lower than num_classes
        val_ratio: 0.5
        dataset:
          max_batches: 2
    post_train:
      trainer:
        epochs: 1
      loader:
        train_batch: 32
        test_batch: 32
        # For toy mode batch size is small, so use higher val_ratio;
        # otherwise batch size will be lower than num_classes
        val_ratio: 0.5
        dataset:
          max_batches: 2
    model_desc:
      # Number of reductions to be applied
      n_reductions: 1
      # Number of cells
      n_cells: 3
      cell:
        # Number of nodes in a cell
        n_nodes: 2
    loader:
      train_batch: 32
      test_batch: 32
      # For toy mode batch size is small, so use higher val_ratio;
      # otherwise batch size will be lower than num_classes
      val_ratio: 0.5
      dataset:
        max_batches: 2
    trainer:
      epochs: 1
      logger_freq: 1
      validation:
        logger_freq: 1

  eval:
    data_parallel: False
    checkpoint: null
    model_desc:
      # Number of reductions to be applied
      n_reductions: 2
      # Number of cells
      n_cells: 5
      cell:
        # Number of nodes in a cell
        n_nodes: 4
    loader:
      train_batch: 32
      test_batch: 32
      # For toy mode batch size is small, so use higher val_ratio;
      # otherwise batch size will be lower than num_classes
      val_ratio: 0.5
      dataset:
        max_batches: 2
    trainer:
      epochs: 1
      logger_freq: 1
      validation:
        logger_freq: 1
